(function(t){t.fn.twentytwenty=function(e){var e=t.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1},e);return this.each(function(){var n=e.default_offset_pct,a=t(this),i=e.orientation,r="vertical"===i?"down":"left",s="vertical"===i?"up":"right",c=!1;t.getPercentage=function(){return n},t.setPercentage=function(t){if(!c)if(c=!0,n<=t)var e=setInterval(function(){n<t?(n+=.002,p(n)):(clearInterval(e),c=!1)},20);else var a=setInterval(function(){n>t?(n-=.002,p(n)):(clearInterval(a),c=!1)},20)},t.startAnimation=function(){if(!c){c=!0;var t=0,e=setInterval(function(){n<.53&&0==t?(n+=.002,p(n)):n>.47&&1==t?(n-=.002,p(n)):n<.5&&2==t?(n+=.002,p(n)):3==t?(clearInterval(e),c=!1):t++},15);c=!1}},a.wrap("<div class='twentytwenty-wrapper twentytwenty-"+i+"'></div>"),e.no_overlay||a.append("<div class='twentytwenty-overlay'></div>");var l=a.find("img:first"),o=a.find("img:last");a.append("<div class='twentytwenty-handle'></div>");var d=a.find(".twentytwenty-handle");d.append("<span class='twentytwenty-"+r+"-arrow'></span>"),d.append("<span class='twentytwenty-"+s+"-arrow'></span>"),a.addClass("twentytwenty-container"),l.addClass("twentytwenty-before"),o.addClass("twentytwenty-after");var f=a.find(".twentytwenty-overlay");f.append("<div class='twentytwenty-before-label' data-content='"+e.before_label+"'></div>"),f.append("<div class='twentytwenty-after-label' data-content='"+e.after_label+"'></div>");var w=function(t){var e=l.width(),n=l.height();return{w:e+"px",h:n+"px",cw:t*e+"px",ch:t*n+"px"}},v=function(t){"vertical"===i?(l.css("clip","rect(0,"+t.w+","+t.ch+",0)"),o.css("clip","rect("+t.ch+","+t.w+","+t.h+",0)")):(l.css("clip","rect(0,"+t.cw+","+t.h+",0)"),o.css("clip","rect(0,"+t.w+","+t.h+","+t.cw+")")),a.css("height",t.h)},p=function(t){var e=w(t);d.css("vertical"===i?"top":"left","vertical"===i?e.ch:e.cw),v(e)};t(window).on("resize.twentytwenty",function(t){p(n)});var y=0,u=0,h=0,g=0;d.on("movestart",function(t){(t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY)&&"vertical"!==i?t.preventDefault():(t.distX<t.distY&&t.distX<-t.distY||t.distX>t.distY&&t.distX>-t.distY)&&"vertical"===i&&t.preventDefault(),a.addClass("active"),y=a.offset().left,u=a.offset().top,h=l.width(),g=l.height()}),d.on("moveend",function(t){a.removeClass("active")}),d.on("move",function(t){a.hasClass("active")&&(n="vertical"===i?(t.pageY-u)/g:(t.pageX-y)/h,n<0&&(n=0),n>1&&(n=1),p(n))}),a.find("img").on("mousedown",function(t){t.preventDefault()}),t(window).trigger("resize.twentytwenty")})}})(jQuery);